version: 2

projects:
- name: "alpinist"
  dir: "terraform"
  workspace: "default"
  terraform_version: "v0.11.7"
  autoplan:
    when_modified:
      - "*.tf"
    enabled: true
  apply_requirements:
    - "approved"
  workflow: "default"

workflows:
  default:
    plan:
      steps:
      - run: "init-terraform"
      - run: "terraform plan -no-color -out $PLANFILE"
    apply:
      steps:
      - run: "init-terraform"
      - run: "terragrunt apply -no-color $PLANFILE"
